<!DOCTYPE html>
<html>
<head>
    <title>Buscador de Samples</title>
    <link rel="stylesheet" href="/styles.css">
    <!-- Bootstrap CSS -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body>
    <div class="container my-5">
        <h1 id="main-title" class="text-center mb-4">Buscador de Samples</h1>

        <!-- Barra de bÃºsqueda centrada -->
        <div class="row justify-content-center">
            <div class="col-md-6">
                <form method="get" action="/" class="input-group">
                    <input type="text" name="q" value="<%= query || '' %>" class="form-control" placeholder="Buscar samples...">
                    <button type="submit" class="btn btn-primary">Buscar</button>
                </form>
            </div>
        </div>

        <!-- Resultados -->
        <% if (results.length > 0) { %>
            <h2 class="mt-5">Resultados:</h2>
            <ul class="list-group mt-3">
                <% results.forEach(sound => { %>
                    <li class="list-group-item">
                        <strong><%= sound.name %></strong><br>
                        <audio controls class="my-2 w-100">
                            <source src="<%= sound.preview %>" type="audio/mpeg">
                        </audio>
                        <p class="text-muted">Usuario: <%= sound.username %></p>
                    </li>
                <% }) %>
            </ul>
        <% } else if (query) { %>
            <p class="text-center mt-5">No se encontraron resultados para "<%= query %>".</p>
        <% } %>
    </div>
     <!-- Wavesurfer script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/4.0.0/wavesurfer.min.js"></script>
    <script>
        const wavesurferList = [];
         results.forEach((sound, index) => { 
            const wavesurfer = WaveSurfer.create({
                container: '#waveform-' + index,
                waveColor: 'violet',
                progressColor: 'purple'
            });
            wavesurfer.load(sound.preview);
            wavesurferList.push(wavesurfer);
         }) 
    </script>
</body>
</html>